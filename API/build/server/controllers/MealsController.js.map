{"version":3,"sources":["../../../server/controllers/MealsController.js"],"names":["mealsService","MealsService","MealsController","req","res","status","send","getAll","body","name","size","price","currency","catererId","mealsValid","MealsValidation","validReqData","validateAddMeal","error","message","invalid","addedMeal","add","meal","mealId","params","id","mealName","mealPrice","mealExist","parseInt","validateModifyMeal","exist","modifiedMeal","modify","index","validateDeleteMeal","deletedMeal","delete"],"mappings":"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","sourcesContent":["/* eslint-disable linebreak-style */\r\n/* eslint-disable class-methods-use-this */\r\n/* eslint-disable no-console */\r\n\r\nimport MealsService from '../services/MealsService';\r\nimport MealsValidation from '../validation/MealsValidation';\r\n\r\nconst mealsService = new MealsService();\r\n\r\nclass MealsController {\r\n  getMeals(req, res) {\r\n    res.status(200).send(mealsService.getAll());\r\n  }\r\n\r\n  addMeal(req, res) {\r\n    const {\r\n      name, size, price, currency, catererId,\r\n    } = req.body;\r\n    const mealsValid = new MealsValidation();\r\n    const validReqData = mealsValid.validateAddMeal(name, size, price, currency, catererId);\r\n    if (validReqData.error) {\r\n      res.status(404).send({ message: 'error', error: validReqData.invalid });\r\n    } else {\r\n      const addedMeal = mealsService.add(name, size, price, currency, catererId);\r\n      res.status(201).send({ message: 'success', meal: addedMeal });\r\n    }\r\n  }\r\n\r\n  modifyMeal(req, res) {\r\n    const mealId = req.params.id;\r\n    const mealName = req.body.name;\r\n    const mealPrice = req.body.price;\r\n    const mealExist = mealsService.mealExist(parseInt(mealId, 10));\r\n    const mealsValid = new MealsValidation();\r\n    const validReqData = mealsValid.validateModifyMeal(mealId, mealName, mealPrice);\r\n\r\n    if (validReqData.error) {\r\n      res.status(404).send({ message: 'error', error: validReqData.invalid });\r\n    } else if (mealExist.exist === false) {\r\n      res.status(404).send({ message: 'error', error: `No meal with mealId: ${mealId}.` });\r\n    } else {\r\n      const modifiedMeal = mealsService.modify(mealExist.index, mealName, mealPrice);\r\n      res.status(201).send({ message: 'success', body: modifiedMeal });\r\n    }\r\n  }\r\n\r\n  deleteMeal(req, res) {\r\n    const mealId = req.params.id;\r\n    const mealExist = mealsService.mealExist(parseInt(mealId, 10));\r\n    const mealsValid = new MealsValidation();\r\n    const validReqData = mealsValid.validateDeleteMeal(mealId);\r\n\r\n    if (validReqData.error) {\r\n      res.status(404).send({ message: 'error', error: validReqData.invalid });\r\n    } else if (mealExist.exist === false) {\r\n      res.status(404).send({ message: 'error', error: `No meal with mealId: ${mealId}.` });\r\n    } else {\r\n      const deletedMeal = mealsService.delete(mealExist.index);\r\n      res.status(200).send({ message: 'success', body: deletedMeal });\r\n    }\r\n  }\r\n}\r\n\r\nexport default new MealsController();\r\n"],"file":"MealsController.js"}